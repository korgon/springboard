<div class="modal" modaly ng-show="vm.modalview" ng-switch="vm.modalview">

	<!-- alert modal -->
	<div class="boxwrap {{ vm.modalview }}" ng-switch-when="alert" ng-controller="ModalAlertCtrl">
		<div class="boxtop"></div>
		<div class="boxcontent">
			<div class="boxmessage">
				<span class="messageicon {{ mm.message_icon }}"></span>
				<p class="message">{{ mm.message }}</p>
			</div>
			<div class="buttons">
				<button class="button" ng-if="mm.button_confirm" ng-click="mm.resolveModal()">{{ mm.button_confirm }}</button>
				<button class="button" ng-if="mm.button_cancel" ng-click="mm.closeModal()" focus-on>{{ mm.button_cancel }}</button>
			</div>
		</div>
	</div>

	<!-- single input modal -->
	<div class="boxwrap {{ vm.modalview }}" ng-switch-when="input" ng-controller="ModalInputCtrl">
		<div class="boxtop"></div>
		<form id="modalInput" name="modalInputForm" novalidate>
			<div class="boxcontent">
				<div class="boxmessage">
					<span class="messageicon {{ mm.message_icon }}"></span>
					<p class="message">{{ mm.message }}</p>
				</div>
				<div class="inputs">
					<input type="text" ng-model="mm.input" required focus-on>
				</div>
				<div class="buttons">
					<input type="submit" class="button" value="{{ mm.button_confirm }}" ng-click="mm.resolveModal()" ng-disabled="modalInputForm.$invalid">
					<button ng-click="mm.closeModal()" class="button">{{ mm.button_cancel }}</button>
				</div>
			</div>
		</form>
	</div>

	<!-- git commit input modal -->
	<div class="boxwrap {{ vm.modalview }}" ng-switch-when="commit" ng-controller="ModalInputCtrl">
		<div class="boxtop"></div>
		<form id="modalInput" name="modalInputForm" novalidate>
			<div class="boxcontent">
				<div class="boxmessage">
					<span class="messageicon {{ mm.message_icon }}"></span>
					<p class="message">{{ mm.message }}</p>
				</div>
				<div class="inputs">
					<input type="text" ng-model="mm.input" required focus-on>
				</div>
				<div class="buttons">
					<input type="submit" class="button" value="{{ mm.button_confirm }}" ng-click="mm.resolveModal()" ng-disabled="modalInputForm.$invalid">
					<button ng-click="mm.closeModal()" class="button">{{ mm.button_cancel }}</button>
				</div>
			</div>
		</form>
		<div class="git-changes">
			<div class="git-change" ng-repeat="change in mm.message_data">
				<span class="git-status {{ change.state == '??' ? 'new' : change.state }}">{{ change.state }}</span>
				<span class="git-file">{{ change.change }}</span>
			</div>
		</div>
	</div>

	<!-- module readme modal -->
	<div class="boxwrap {{ vm.modalview }}" ng-switch-when="moduleInfo" ng-controller="ModalModuleCtrl">
		<div class="boxtop"></div>
		<div class="boxcontent">
			<div class="boxmessage">
				<span class="icon module-{{ mm.icon }}"></span>
				<span>{{ mm.type }}</span>
			</div>
			<div class="markdown" marked src="mm.readmeUrl"></div>

			<div class="buttons">
				<button ng-click="mm.closeModal()" class="button">Close</button>
			</div>
		</div>
	</div>

	<!-- install module modal -->
	<div class="boxwrap {{ vm.modalview }}" ng-switch-when="moduleInstall" ng-controller="ModalModuleCtrl">
		<div class="boxtop"></div>
		<div class="boxcontent">

			<div class="boxleft">
				<ul class="uimodules">
					<li ng-repeat="module in mm.modules" ng-class="{ selected: module.name == mm.selected.module }">
						<div class="modulename" ng-click="mm.selectModule(module.type) && selectModule(module.themes.default.type)">
							<span class="icon module-{{ module.icon }}"></span>
							<span>{{ module.name }}</span>
						</div>
						<ul class="modulethemes">
							<li ng-repeat="theme in module.themes" ng-class="{ selected: module.name == mm.selected.module && theme.name == mm.selected.theme }" ng-if="keyLength(module.themes) > 1">
								<div class="themename" ng-click="mm.selectModule(theme.type)">
									<span class="icon tiny active" ng-if="mm.selected.module == module.name && mm.selected.theme == theme.name"></span>
									<span>{{ theme.name }}</span>
								</div>
							</li>
						</ul>
					</li>
				</ul>
			</div>

			<div class="boxright">
				<div class="markdown" marked src="mm.readmeUrl"></div>
				<div class="buttons">
					<button ng-click="mm.resolveModal()" class="button" ng-disabled="!mm.selected">Install</button>
					<button ng-click="mm.closeModal()" class="button">Close</button>
				</div>
			</div>

		</div>
	</div>

</div>
